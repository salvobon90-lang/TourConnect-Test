Implementazione Fase 5 â€“ Smart Tour Completion System (Group Sharing & Dynamic Pricing)

Introduci in TourConnect un sistema intelligente che permette ai turisti di aggregarsi per completare i tour e condividere i costi, incrementando le prenotazioni e riducendo i prezzi unitari.
Mantieni il design coerente con il tema dark grey + arancione #FF6600 e le traduzioni multilingua (IT, EN, FR, DE, ES).

ğŸ¯ OBIETTIVO

Rendere ogni tour â€œcollaborativoâ€: se non viene prenotato completamente, altri utenti possono aggregarsi finchÃ© si raggiunge la capienza minima.
Quando il tour Ã¨ completo â†’ il prezzo si stabilizza e tutti ricevono conferma automatica.

ğŸ§© 1ï¸âƒ£ Nuovo sistema â€œGroup Bookingâ€

Aggiungi nel database una nuova tabella group_bookings con i campi:

id

tour_id

max_participants

min_participants

current_participants

price_per_person

status (enum: open, full, closed, cancelled)

created_at, updated_at

Quando un turista prenota un tour:

Se esiste un gruppo aperto â†’ si aggrega automaticamente.

Se non esiste â†’ crea un nuovo gruppo con stato open.

Ogni nuovo partecipante abbassa automaticamente il costo unitario (regola dinamica).

ğŸ’° 2ï¸âƒ£ Prezzo dinamico (Dynamic Pricing Engine)

Implementa una logica di prezzo inversamente proporzionale al numero di partecipanti:

new_price = base_price - ((current_participants - 1) * discount_step)


discount_step = 5â€“10% del prezzo base (configurabile)

Non puÃ² scendere sotto una soglia minima (es. 60% del prezzo base)

Mostra sempre in tempo reale:

Prezzo corrente

Partecipanti attuali / massimi

â€œTi mancano X persone per ottenere il prezzo minimo!â€

Quando il gruppo raggiunge min_participants, mostra badge â€œConfermatoâ€.

ğŸ¤ 3ï¸âƒ£ Sistema di aggregazione sociale (â€œJoin & Shareâ€)

Aggiungi un pulsante â€œUnisciti al gruppoâ€ nella scheda del tour.

Una volta prenotato, mostra:

Numero di posti rimanenti

Nome e foto (opzionale) degli altri partecipanti

Pulsante per condividere il link del gruppo su social o via chat (â€œInvita amici e riduci il costo!â€).

Aggiungi un codice di invito univoco per ogni gruppo (group_code), che permette ad altri utenti di unirsi.

ğŸ’¬ 4ï¸âƒ£ Sistema notifiche e aggiornamenti

WebSocket o API push per aggiornare in tempo reale:

Numero partecipanti

Prezzo aggiornato

Stato gruppo (â€œOpenâ€, â€œConfermatoâ€, â€œCompletoâ€)

Notifiche automatiche:

Quando il gruppo si completa â†’ messaggio â€œTour confermato ğŸ‰â€

Quando il prezzo scende â†’ messaggio â€œIl tuo prezzo Ã¨ stato aggiornato ğŸ’°â€

Quando mancano pochi posti â†’ â€œAncora 2 posti per completare il gruppo!â€

ğŸ“Š 5ï¸âƒ£ Dashboard aggiornate

Turista:

Sezione â€œI miei gruppiâ€ con stato, prezzo, e pulsante â€œInvitaâ€.

Guida / Provider:

Dashboard â€œTour in completamentoâ€ con:

Numero di gruppi attivi

Percentuale di riempimento

Entrate previste e confermate

Admin:

Sezione â€œAnalyticsâ€ con tasso medio di completamento tour, prezzo medio per persona, e incremento conversioni.

ğŸ§­ 6ï¸âƒ£ Interfaccia Discover e Tour

Nelle schede tour mostra:

Stato gruppo (es. â€œ4/8 partecipantiâ€, â€œIn completamentoâ€)

Prezzo attuale aggiornato dinamicamente

Barra di progresso visiva (es. 60% riempito).

Aggiungi un filtro â€œTour collaborativiâ€ nella pagina Discover.

Ordina i tour per â€œpiÃ¹ vicini al completamentoâ€.

âš™ï¸ Requisiti tecnici

Aggiornare backend (API + DB) per gestire logica di gruppo e pricing.

Aggiornare frontend (React) per UI dinamica e progressiva.

Aggiungere controlli di sicurezza (autenticazione, limiti utenti per gruppo).

Traduzioni per tutti i nuovi testi in 5 lingue.

Aggiornare changelog e documentazione nel file replit.md.

âœ… Testing

Crea tour demo con 6 posti massimi.

Prenota da piÃ¹ account turistici per verificare aggregazione automatica.

Testa aggiornamento prezzo in tempo reale.

Verifica notifiche e stato gruppo.

Simula tour completato e chiusura gruppo.

Al termine marca il progetto come:
Fase 5 â€“ Smart Tour Completion System (Dynamic Group Booking) âœ… completata.